import { Meta, Story, Canvas, ArgsTable } from "@storybook/addon-docs/blocks";

<Meta
	title="Modules/Testing/Introduction"
	parameters={{ previewTabs: { 'canvas': { hidden: true }}}}
/>

# Testing module

For our grand goals, the existing testing libraries didn't suffice, so we made our own. We made the tests to easily scale and allow you to have an extremely free enviroment to tinker with.

## Usage
Assertions should run inside of a test scope, see a simple example:
``` typescript
import test from "@acai/testing";

test("Test that 2 + 2 is equal 4", expect => {
	expect(2 + 2).toEqual(4);
});
```

## Grouping
You can also group tests inside of a context, that can be nested inside of another context

``` typescript
test.group("Add tests", () => {
	test("Test that 2 + 2 is equal 4", expect => {
		expect(2 + 2).toEqual(4);
	});

	test("Test that 3 + 2 is equal 5", expect => {
		expect(3 + 2).toEqual(5);
	});
});

test.group("Add tests", () => {
	test("Test that 2 + 2 is equal 4", expect => {
		expect(2 + 2).toEqual(4);
	});

	test.group("Further nested group tests", () => {
		test("Test that 3 + 2 is equal 5", expect => {
			expect(3 + 2).toEqual(5);
		});
	});
});
```

## Only
If you want to run only specific tests, you can use the only method helper for that, you can add on multiple tests, and only those will be run. You can also pass a third parameter that will return a condition to if that test will run.

``` typescript
test.only("Test that 2 + 2 is equal 4", assert => {
	assert(2 + 2).equals(4);
});

test.only("Test that 2 + 2 is equal 4", assert => {
	assert(2 + 2).equals(4);
}, runOnlyIfTrue);
```

## Except
If you do not want to run certain tests, you can call except, and those will be skipped. You can also pass a third parameter that will return a condition to if that test will be skipped.

``` typescript
test.except("Test that 2 + 2 is equal 4", assert => {
	assert(2 + 2).equals(4);
});

test.except("Test that 2 + 2 is equal 4", assert => {
	assert(2 + 2).equals(4);
}, skipOnlyIfTrue);
```

## Tag
You may wish to tag your tests or groups of tests so you can easily run based on a tag filter. You can do that in various ways:

``` typescript
// Similar to grouping, this nests the tests inside in the same context
test.tag(["math", "sum"], assert => {
	test("Test that 3 + 2 is equal 5", expect => {
		expect(3 + 2).toEqual(5);
	});
});

// Or you can also call it
test.tag(["math", "sum"], "Test that 3 + 2 is equal 5", expect => {
	expect(3 + 2).toEqual(5);
});

// You can concatenate the tags in a test...
test.except("Test that 2 + 2 is equal 4", assert => {
	assert(2 + 2).equals(4);
}).tag(["math", "sum"]);

// ...or in a group
test.group("Add tests", () => {
	test("Test that 2 + 2 is equal 4", expect => {
		expect(2 + 2).toEqual(4);
	});
}).tag(["math", "sum"]);
```

## Ignore
Tests marked as ignore will be run but won't cause an error if they do not pass

``` typescript
// Similar to grouping, this nests the tests inside in the same context
test.ignore(assert => {
	test("Test that 3 + 2 is equal 5", expect => {
		expect(3 + 2).toEqual(5);
	});
});

// Or you can also call it
test.ignore("Test that 3 + 2 is equal 5", expect => {
	expect(3 + 2).toEqual(5);
});

// You can concatenate the tags in a test...
test.except("Test that 2 + 2 is equal 4", assert => {
	assert(2 + 2).equals(4);
}).ignore();

// ...or in a group
test.group("Add tests", () => {
	test("Test that 2 + 2 is equal 4", expect => {
		expect(2 + 2).toEqual(4);
	});
}).ignore();
```